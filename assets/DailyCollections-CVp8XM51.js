import{c as y,r as n,j as e,T as v,a as w}from"./index-DxkU6T3I.js";import{u as D,D as C,P as k,E as z}from"./ExportModal-BWSopAbh.js";import{a as m,d as E}from"./CustomDatePicker-T4IMFbDZ.js";import{I as T}from"./indian-rupee-Cs0CkvdR.js";import{B as _,G as S}from"./globe-BAOjvFjv.js";import{C as p}from"./calendar-CMNTU1_T.js";import"./file-text-CJsyRSEY.js";const F=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],A=y("chevron-up",F);function q(){const[l,h]=n.useState(""),[r,g]=n.useState(""),[i,j]=n.useState(null),[N,o]=n.useState(!1),{data:a,isLoading:b,error:d}=D({queryKey:["daily-collections",l,r],queryFn:async()=>{const s=new URLSearchParams;return l&&s.append("date_from",l),r&&s.append("date_to",r),(await w.get(`/daily-collections?${s}`)).data},retry:1,staleTime:3e4}),c=Array.isArray(a?.collections)?a.collections:Array.isArray(a)?a:[],x=a?.totals||{cash:0,online:0},u=c.reduce((s,t)=>s+(t.total_collected||0),0),f=c.reduce((s,t)=>s+(t.orders_count||0),0);return e.jsxs("div",{className:"min-h-screen bg-[#F5F1E8] pb-20",children:[e.jsx("header",{className:"glass-header-green text-white p-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(v,{size:24}),"Daily Collections"]}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"Track payments by actual delivery date"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"p-2 bg-white/20 rounded-lg hover:bg-white/30 transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx(C,{size:18}),e.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"Export"})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"glass rounded-2xl p-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"From"}),e.jsx(m,{selected:l,onChange:s=>h(s),placeholder:"Start Date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"To"}),e.jsx(m,{selected:r,onChange:s=>g(s),placeholder:"End Date"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(T,{size:16}),e.jsx("p",{className:"text-xs font-bold opacity-90",children:"Total Collected"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",u]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(k,{size:16}),e.jsx("p",{className:"text-xs font-bold opacity-90",children:"Orders Delivered"})]}),e.jsx("p",{className:"text-2xl font-bold",children:f})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"glass-card rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_,{size:16,className:"text-green-600"}),e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Cash"})]}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₹",x.cash||0]})]}),e.jsxs("div",{className:"glass-card rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(S,{size:16,className:"text-blue-600"}),e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Online"})]}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["₹",x.online||0]})]})]})]}),e.jsx("div",{className:"px-4 space-y-3",children:b?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):d?e.jsxs("div",{className:"text-center py-8 text-red-500",children:[e.jsx("p",{className:"font-bold",children:"Error loading collections"}),e.jsx("p",{className:"text-sm mt-2",children:d.message})]}):c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(p,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No collections found"})]}):c.map(s=>e.jsxs("div",{className:"glass-card rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>j(i===s.date?null:s.date),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-50 to-green-50 rounded-xl flex items-center justify-center",children:e.jsx(p,{size:20,className:"text-teal-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-gray-900",children:new Date(s.date).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.orders_count," orders"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["₹",s.total_collected]})}),i===s.date?e.jsx(A,{size:20,className:"text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-400"})]})]}),i===s.date&&e.jsx("div",{className:"border-t border-gray-100 bg-gray-50 p-4 space-y-2",children:s.orders.map(t=>e.jsxs("div",{className:"glass-card rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-sm text-gray-900",children:["#",t.token]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.customer_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600",children:["₹",t.paid_amount]}),t.balance>0&&e.jsxs("p",{className:"text-xs text-red-500",children:["₹",t.balance," pending"]})]})]},t.id))})]},s.date))}),e.jsx(z,{isOpen:N,onClose:()=>o(!1),exportType:"collections"})]})}export{q as default};
