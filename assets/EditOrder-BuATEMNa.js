import{c as f,b as y,u as j,r as i,j as e,g as v,a as u}from"./index-DxkU6T3I.js";import{A as N}from"./arrow-left-BWpi5I5Z.js";import{C as w}from"./circle-alert-xOeAsiCA.js";import{H as _}from"./hash-BpMepLwd.js";import{U as k}from"./user-CwbVznwV.js";import{C as E}from"./calendar-CMNTU1_T.js";import{I as C}from"./indian-rupee-Cs0CkvdR.js";import{F as g}from"./file-text-CJsyRSEY.js";const z=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],D=f("save",z);function L(){const{id:o}=y(),c=j(),[d,m]=i.useState(!1),[p,b]=i.useState(!0),[x,n]=i.useState(""),[a,t]=i.useState({bill_number:"",customer_name:"",delivery_date:"",remarks:"",total_amount:"",images:[]});i.useEffect(()=>{(async()=>{try{const r=(await u.get(`/orders/${o}`)).data;t({bill_number:r.bill_number||"",customer_name:r.customer_name||"",delivery_date:r.delivery_date?r.delivery_date.split("T")[0]:"",remarks:r.remarks||"",total_amount:r.total_amount||"",images:r.images||[]})}catch{n("Failed to load order details")}finally{b(!1)}})()},[o]);const h=async s=>{s.preventDefault(),m(!0),n("");try{await u.put(`/orders/${o}`,{bill_number:a.bill_number,customer_name:a.customer_name,delivery_date:a.delivery_date,remarks:a.remarks,total_amount:a.total_amount}),c(`/orders/${o}`)}catch(l){n(l.response?.data?.message||"Failed to update order"),m(!1)}};return p?e.jsx("div",{className:"min-h-screen bg-[#ECE5DD] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#075E54]"})}):e.jsxs("div",{className:"min-h-screen bg-[#ECE5DD] pb-20 font-sans",children:[e.jsx("header",{className:"glass-header-green text-white p-4 sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>c(-1),className:"p-2 -ml-2 bg-white/20 rounded-lg hover:bg-white/30 transition-colors",children:e.jsx(N,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Edit Order"}),e.jsx("p",{className:"text-xs opacity-80",children:"Update order details"})]})]})}),e.jsxs("main",{className:"p-4 max-w-lg mx-auto space-y-4",children:[x&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 border border-red-100 flex items-start gap-3 text-red-600 animate-in fade-in slide-in-from-top-2",children:[e.jsx(w,{size:20,className:"shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm font-bold",children:x})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#075E54] mb-1",children:[e.jsx(_,{size:18}),e.jsx("h2",{className:"font-bold text-xs uppercase tracking-wider",children:"Bill Details"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1.5 ml-1",children:["Bill Number ",e.jsx("span",{className:"text-gray-300 font-normal",children:"(Optional)"})]}),e.jsx("input",{type:"text",value:a.bill_number,onChange:s=>t({...a,bill_number:s.target.value}),className:"w-full p-3 bg-gray-50 border-gray-100 rounded-xl focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all font-bold text-gray-900 placeholder-gray-400",placeholder:"e.g. 1024"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#075E54] mb-1",children:[e.jsx(k,{size:18}),e.jsx("h2",{className:"font-bold text-xs uppercase tracking-wider",children:"Customer Info"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1.5 ml-1",children:"Customer Name"}),e.jsx("input",{type:"text",value:a.customer_name,onChange:s=>t({...a,customer_name:s.target.value}),className:"w-full p-3 bg-gray-50 border-gray-100 rounded-xl focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all font-bold text-gray-900 placeholder-gray-400",placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1.5 ml-1",children:"Delivery Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:a.delivery_date,onChange:s=>t({...a,delivery_date:s.target.value}),className:"w-full p-3 pl-10 bg-gray-50 border-gray-100 rounded-xl focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all font-bold text-gray-900"}),e.jsx(E,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#075E54] mb-1",children:[e.jsx(C,{size:18}),e.jsx("h2",{className:"font-bold text-xs uppercase tracking-wider",children:"Billing Amount"})]}),e.jsx("div",{children:e.jsx("input",{type:"number",value:a.total_amount,onChange:s=>t({...a,total_amount:s.target.value}),className:"w-full p-3 bg-gray-50 border-gray-100 rounded-xl focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all font-bold text-gray-900 placeholder-gray-400",placeholder:"0.00"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#075E54] mb-1",children:[e.jsx(g,{size:18}),e.jsx("h2",{className:"font-bold text-xs uppercase tracking-wider",children:"Notes"})]}),e.jsx("textarea",{value:a.remarks,onChange:s=>t({...a,remarks:s.target.value}),rows:3,className:"w-full p-3 bg-gray-50 border-gray-100 rounded-xl focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all font-medium text-gray-900 placeholder-gray-400 resize-none",placeholder:"Add any special instructions..."})]}),a.images.length>0&&e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#075E54] mb-1",children:[e.jsx(g,{size:18}),e.jsx("h2",{className:"font-bold text-xs uppercase tracking-wider",children:"Images (Read Only)"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.images.map((s,l)=>e.jsx("img",{src:v(s.filename),className:"w-full h-24 object-cover rounded-xl bg-gray-100",alt:"Order attachment"},l))})]}),e.jsxs("button",{type:"submit",disabled:d,className:"w-full py-4 px-6 bg-[#25D366] text-white text-lg font-bold rounded-xl shadow-lg shadow-green-500/30 flex items-center justify-center gap-2 active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:[d?"Saving...":"Save Changes",!d&&e.jsx(D,{size:20})]})]})]})]})}export{L as default};
